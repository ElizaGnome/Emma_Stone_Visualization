<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script src="https://d3js.org/d3.v5.min.js"></script>


    <style>
        .line
        {
        fill:'none';
        stroke-width: 3;

        }

        .text
        {

        font-family: Times New Roman ;
        font-size: 25px;
        stroke: black;
        text-align: center;

        }

       .grid .tick
        {
        stroke: black;
        opacity: 0.5;

        }

      .grid path
       {
      stroke-width: 0;
       }

    </style>
</head>

    <body>
        <script>


         d3.csv("Emma_Data_Comedy.csv").then(function(Movie){
            console.log(Movie);

            var spacing = 50;
            var width = 600;
            var height = 400;

            var svg = d3.select("body").append("svg")
                        .attr("width", width)
                        .attr("height", height)
                        .style("background", "lightgray")
                        .style("padding", spacing)

                        .append("g")
                        .attr("transform", "translate(" + spacing/2 + "," + spacing/2 + ")");





            var xScale = d3.scaleLinear()
                           .domain([2005, 2021])
                           .range([0, width-spacing]);

            var xAxis = d3.axisBottom(xScale).tickFormat(d3.format("d"));

            var yScale = d3.scaleLinear()
                            .domain([0,5])
                            .range([height-spacing, 0]);

            var yAxis = d3.axisLeft(yScale)
                          .tickFormat(d3.format("d"));



            svg.append("g")
            .attr("transform", "translate(0," + (height- spacing)+ ")")
            .style("font-size", "10px")
            .style("font-family", "Times New Roman")
            .call(xAxis.ticks(16));

            svg.append("g")
            .style("font-size", "11px")
            .call(yAxis.ticks(6));

            var line1 = d3.line()
                          .x (function(d){return xScale(d.Year);})
                          .y (function(d){return yScale(d.Action);});

            var line2 = d3.line()
                          .x (function(d){return xScale(d.Year);})
                          .y (function(d){return yScale(d.Short);});

            var line3 = d3.line()
                          .x (function(d){return xScale(d.Year);})
                          .y (function(d){return yScale(d.Animation);});
            var line4 = d3.line()
                          .x (function(d){return xScale(d.Year);})
                          .y (function(d){return yScale(d.Number);});

            function make_y_gridlines() {
                return d3.axisLeft(yScale)
    	        .ticks(5)
    	      }


            svg.append("path")
                .attr("class","line")
                .attr("fill", "none")
                .attr("stroke-width", 3)
                .attr("d", line1(Movie))
                .style("stroke", "Green");

            svg.append("path")
                .attr("class","line")
                .attr("fill", "none")
                .attr("stroke-width", 3)
                .attr("d", line2(Movie))
                .style("stroke", "red")
                ;

            svg.append("path")
                .attr("class","line")
                .attr("fill", "none")
                .attr("stroke-width", 3)
                .attr("d", line3(Movie))
                .style("stroke", "yellow")
                 ;

            svg.append("path")
                .attr("class","line")
                .attr("fill", "none")
                .attr("stroke-width", 3)
                .attr("d", line4(Movie))
                .style("stroke", "purple")
                 ;



            var colourSet = ["Green", "red", "yellow", "purple"]




            var legend = d3.select("svg")
            var keys = ["Action", "Short", "Amimation", "Comedy"]
            var color = d3.scaleOrdinal()
            .domain(keys)
            .range(colourSet);

            legend.selectAll("mydots")
            .data(keys)
            .enter()
            .append("circle")
            .attr("cx", 500)
            .attr("cy", function (d,i){return 13 + i*20})
            .attr("r",6)
            .style("fill", function(d) {return color(d)})

           legend.selectAll("mylabels")
           .data(keys)
           .enter()
           .append("text")
            .attr("x", 520)
            .attr("y", function(d,i) {return 13 + i * 20})
            .style("fill", "black")
            .text(function(d){return d})
            .attr("text-anchor", "left")
            .style("alignment-baseline", "middle")


            svg.append("text")
            .attr("class", "text")
            .attr("x", 300)
            .attr("y", -5)
            .style("fill", "Black")
            .attr("text-anchor", "middle")
            .text("Top Genres Over Time");


            svg.append("g")
  		    .attr("class","grid")
  		    .style("stroke-dasharray",("3,3"))
  		    .call(make_y_gridlines()
            .tickSize(-width)
            .tickFormat("")
         )


        })

        </script>

        </body>

</html>